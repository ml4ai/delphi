language: python

python:
  - "3.6"

env:
  - DELPHI_DB=$TRAVIS_BUILD_DIR/delphi.db

addons:
  apt:
    packages:
    - graphviz

install:
  - pip install git+https://github.com/sorgerlab/indra.git
  - export PYTHONPATH=$PYTHONPATH:$TRAVIS_BUILD_DIR
  - pip install .[test]
  - wget http://vision.cs.arizona.edu/adarsh/delphi.db

script:
  - make test
  - cd docs; make apidocs; make html

deploy:
  local-dir: docs/build/html
  provider: pages
  skip-cleanup: true
  github-token: $GITHUB_TOKEN
  keep-history: true
  on:
    branch: master
after_success: coveralls
cache: pip
