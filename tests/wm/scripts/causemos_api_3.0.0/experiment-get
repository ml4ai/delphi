#!/bin/bash

# Author: Joseph Astier

# Query an experiment result using the CauseMos 3.0.0 API
#

modelId=$1
experimentId=$2

if [[ $modelId == "" ]] || [[ $experimentId == "" ]]; then

        echo "Please specify a model ID and an experiment ID"
        echo "Usage:  $0 model_ID experiment_ID"

else
        login="-u me:ivilab4fun"
	endpoint="/models/$modelId/experiments/$experimentId"
	url=$(./get_delphi_url)

	call="curl $login -s $url$endpoint"
	echo "Call:"
        echo $call

	call_time=$(date +%T.%3N)
        response=$($call)
	response_time=$(date +%T.%3N)

        echo "Response:"
        echo $response | jq
        echo "Server queried: $call_time"
        echo "Server replied: $response_time"
fi
